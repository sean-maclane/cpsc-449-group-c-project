test_name: Check valid inputs
stages:
  - name: Valid signup request
    request:
      url: /accounts/create
      json:
        username: 'tavern_username_1'
        password: 'tavern_password_1'
        email: 'email_1@tavern.com'
      method: POST
      headers:
        content-type: application/json
    response:
      status_code: 201
      body:
        {}
      headers:
        content-type: application/json

  - name: Valid login request
    request:
      url: /accounts/login
      json:
        username: 'tavern_username_1'
        password: 'tavern_password_1'
      method: POST
      headers:
        content-type: application/json
    response:
      status_code: 201
      body:
        {}
      headers:
        content-type: application/json

  - name: Valid update email request
    request:
      url: /accounts/updateEmail
      json:
        username: 'tavern_username_1'
        password: 'tavern_password_1'
        email: 'updated_email_1@tavern.com'
      method: POST
      headers:
        content-type: application/json
    response:
      status_code: 201
      body:
        {}
      headers:
        content-type: application/json

  - name: Make to-be deleted account
    request:
      url: /accounts/create
      json:
        username: 'tavern_username_temp'
        password: 'tavern_password_temp'
        email: 'email_temp@tavern.com'
      method: POST
      headers:
        content-type: application/json
    response:
      status_code: 201
      body:
        {}
      headers:
        content-type: application/json

  - name: Valid account delete request
    request:
      url: /accounts/delete
      json:
        username: 'tavern_username_temp'
        password: 'tavern_password_temp'
      method: POST
      headers:
        content-type: application/json
    response:
      status_code: 201
      body:
        {}
      headers:
        content-type: application/json

  - name: Valid increment karma request
    request:
      url: /votes/upvote
      json:
        username: 'tavern_username_1'
        password: 'tavern_password_1'
      method: POST
      headers:
        content-type: application/json
    response:
      status_code: 201
      body:
        {}
      headers:
        content-type: application/json

  - name: Valid decrement karma request
    request:
      url: /upvotes/downvote
      json:
        username: 'tavern_username_1'
        password: 'tavern_password_1'
      method: POST
      headers:
        content-type: application/json
    response:
      status_code: 201
      body:
        {}
      headers:
        content-type: application/json

---
  
test_name: Check invalid inputs, needs changes in dev before this works TODO - add login, delete account, update email, increment karma, and decrement karma
stages:
  - name: Signup duplicate username
    request:
      url: /signup
      json:
        username: 'tavern_username_1'
        password: 'tavern_password_2'
        email: 'email_2@tavern.com'
      method: POST
      headers:
        content-type: application/json
    response:
      status_code: 409
      body:
        error: 'There was an error processing your data'
      headers:
        content-type: application/json

  - name: Signup duplicate email
    request:
      url: /signup
      json:
        username: 'tavern_username_2'
        password: 'tavern_password_2'
        email: 'email_1@tavern.com'
      method: POST
      headers:
        content-type: application/json
    response:
      status_code: 409
      body:
        error: 'There was an error processing your data'
      headers:
        content-type: application/json

  - name: Signup wrong key (missing data)
    request:
      url: /signup
      json:
        username_wrong_key: 'tavern_username_1'
        password: 'tavern_password_1'
        email: 'email_2@tavern.com'
      method: POST
      headers:
        content-type: application/json
    response:
      status_code: 409
      body:
        error: 'There was an error reading your data'
      headers:
        content-type: application/json